<h1 align = "center">计算机网络实验</h1>

<h3 align = "center">实验3：基于UDP服务设计可靠传输协议并编程实现</h3>

<center><font size='5'><b>实验3-4</b></font>     </center>

<center>姓名： 蒋浩南      &emsp;&emsp;  学号：2012948     </center>

[toc]

## 一、实验要求

* 基于给定的实验测试环境，通过改变延迟时 间和丢包率，完成下面3组性能对比实验：
* （1）停等机制与滑动窗口机制性能对比；
* （2）滑动窗口机制中不同窗口大小对性能的影响；
* （3）有拥塞控制和无拥塞 控制的性能比较。



#### 设计思路：

* 分别在延时和吞吐率一个固定，以另一个为变量，在不同情况下，测试比较total time 和吞吐率。

* 重复实验，取平均值。
* 比较分析。





## 二、停等机制与滑动窗口机制性能对比



固定滑动窗口为4。

### （一）固定延时为0，变量为丢包率  

* 单位（s）

| 机制\丢包率（%） | 0     | 5      | 8      | 10     |
| :--------------: | ----- | ------ | ------ | ------ |
|       停等       | 0.554 | 9.144  | 13.899 | 15.97  |
|     滑动窗口     | 0.479 | 10.658 | 18.397 | 24.525 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126235000636.png" alt="image-20221126235000636" style="zoom:67%;" />



* 单位（Mbps）

| 机制\丢包率（%） | 0       | 5       | 8        | 10       |
| :--------------: | ------- | ------- | -------- | -------- |
|       停等       | 26.821  | 1.62498 | 1.06906  | 0.930421 |
|     滑动窗口     | 31.0205 | 1.39415 | 0.807676 | 0.605864 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126235031142.png" alt="image-20221126235031142" style="zoom:67%;" />



### （二）固定丢包率为0，变量为延时

* 单位（s）

| 机制\时延(ms) | 0     | 5     | 10    | 20     |
| :-----------: | ----- | ----- | ----- | ------ |
|     停等      | 0.554 | 7.094 | 7.559 | 10.361 |
|   滑动窗口    | 0.479 | 7.542 | 8.125 | 9.311  |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126235104085.png" alt="image-20221126235104085" style="zoom:67%;" />



* 单位（Mbps）

| 机制\时延(ms) | 0       | 5       | 10      | 20      |
| :-----------: | ------- | ------- | ------- | ------- |
|     停等      | 26.821  | 2.09456 | 1.96571 | 1.43411 |
|   滑动窗口    | 31.0205 | 1.97014 | 1.82878 | 1.59584 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126235127179.png" alt="image-20221126235127179" style="zoom:67%;" />



### （三）分析

1. 总体来说滑动窗口比停等的性能更好，但不是太显著。
2. 滑动窗口对丢包率更为敏感，由于其丢包会导致一系列包的重传，消耗较大。
3. 停等对延时的更为敏感，延时的增大造成停等时间的增大。
4. 延时对滑动窗口的影响也表现在等待确认ack的时间增大。







## 三、滑动窗口机制中不同窗口大小对性能的影响

### （一）固定延时为0，变量为丢包率  

* 单位（s）

| 窗口大小\丢包率（%） | 0     | 5      | 8      | 10     |
| :------------------: | ----- | ------ | ------ | ------ |
|          4           | 0.479 | 10.658 | 18.397 | 24.525 |
|          8           | 1.047 | 13.05  | 36.084 | 70.818 |



<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126233739485.png" alt="image-20221126233739485" style="zoom:67%;" />



* 单位（Mbps）

| 窗口大小\丢包率（%） | 0       | 5       | 8        | 10       |
| :------------------: | ------- | ------- | -------- | -------- |
|          4           | 31.0205 | 1.39415 | 0.807676 | 0.605864 |
|          8           | 14.1918 | 1.13861 | 0.411784 | 0.209817 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126233821715.png" alt="image-20221126233821715" style="zoom:67%;" />



### （二）固定丢包率为0，变量为延时

单位（s）

| 窗口大小\时延(ms) | 0     | 5     | 10    | 20     |
| :---------------: | ----- | ----- | ----- | ------ |
|         4         | 0.479 | 7.542 | 8.125 | 9.311  |
|         8         | 1.047 | 6.526 | 7.567 | 10.977 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126233858545.png" alt="image-20221126233858545" style="zoom:67%;" />

单位（Mbps）

| 窗口大小\时延(ms) | 0       | 5       | 10      | 20      |
| :---------------: | ------- | ------- | ------- | ------- |
|         4         | 31.0205 | 1.97014 | 1.82878 | 1.59584 |
|         8         | 14.1918 | 2.27687 | 1.96363 | 1.35363 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126233944041.png" alt="image-20221126233944041" style="zoom:67%;" />

### （三）分析

* 窗口越大，一般重传时的报文更多，所以丢包率对较大的窗口影响较大。延时的影响也较大。

* 窗口越大，能发送的数据也更多，在网络条件好的情况下，性能较好。
* 而较小的窗口，虽然丢包率和延时的影响较小。但能发送的数据也少。
* 总体而言，在一定范围内，性能相似。



## 四、有拥塞控制和无拥塞 控制的性能比较

### （一）固定延时为0，变量为丢包率  

* 单位（s）

| 拥塞控制\丢包率（%） | 0     | 5     | 8      | 10     |
| :------------------: | ----- | ----- | ------ | ------ |
|      无拥塞控制      | 1.047 | 13.05 | 36.084 | 70.818 |
|      有拥塞控制      | 1.15  | 6.737 | 12.074 | 16.633 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126234015706.png" alt="image-20221126234015706" style="zoom:67%;" />

* 单位（Mbps）

| 拥塞控制\丢包率（%） | 0       | 5       | 8        | 10       |
| :------------------: | ------- | ------- | -------- | -------- |
|      无拥塞控制      | 14.1918 | 1.13861 | 0.411784 | 0.209817 |
|      有拥塞控制      | 12.9207 | 2.20555 | 1.23065  | 0.893334 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221126234040097.png" alt="image-20221126234040097" style="zoom:67%;" />

### （二）固定丢包率为0，变量为延时

* 单位（s）

| 拥塞控制\时延(ms) | 0     | 5     | 10    | 20     |
| :---------------: | ----- | ----- | ----- | ------ |
|    无拥塞控制     | 1.047 | 6.526 | 7.567 | 10.977 |
|    有拥塞控制     | 1.15  | 8.071 | 8.785 | 8.794  |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221226160715338.png" alt="image-20221226160715338" style="zoom:67%;" />



* 单位（Mbps）

| 拥塞控制\时延(ms) | 0       | 5       | 10      | 20      |
| :---------------: | ------- | ------- | ------- | ------- |
|    无拥塞控制     | 14.1918 | 2.27687 | 1.96363 | 1.35363 |
|    有拥塞控制     | 12.9207 | 1.84101 | 1.69139 | 1.68965 |

<img src="C:\Users\nan\AppData\Roaming\Typora\typora-user-images\image-20221226160757673.png" alt="image-20221226160757673" style="zoom:67%;" />



### （三）分析

* 在网络状况较好的情况下，无拥塞控制的性能较好。

  由于有拥塞控制在超时或者重复ACK的情况下会进入慢启动或者快速回复状态，使得窗口减小，然后重新增加。在该情况下差于一直保持窗口大小的无拥塞控制情况。

* 在网络状况较差的情况下，有拥塞控制的性能较好。

​		该情况下，无拥塞控制的重传和延时的代价可能较大，却无法改变。

​		而有拥塞控制，根据当前网络状况，不断改变窗口大小，最后使得窗口大小在合适的范围内波动，动态调整重传和延时代价。

